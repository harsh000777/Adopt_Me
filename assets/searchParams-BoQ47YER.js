import{j as e,L as b,a as m,A as p}from"./index-DNjeOOWv.js";import{u}from"./useQuery-DvOKnG6l.js";async function f({queryKey:a}){const t=a[1];if(!t)return[];const n=await fetch(`https://pets-v2.dev-apis.com/breeds?animal=${t}`);if(!n.ok)throw new Error(`breeds ${t} fetch not ok`);return n.json()}function g(a){const t=u({queryKey:["breeds",a],queryFn:f,enabled:!!a});return[(t==null?void 0:t.data)??[],t.status]}async function v({queryKey:a}){const{animal:t,location:n,breed:r}=a[1],o=await fetch(`https://pets-v2.dev-apis.com/pets?animal=${t}&location=${n}&breed=${r}`);if(!o.ok)throw new Error(`pet search not okay: ${t}, ${n}, ${r}`);return o.json()}const $=({name:a,animal:t,breed:n,images:r=[],location:o,id:i})=>{const c=(r==null?void 0:r[0])||"http://pets-images.dev-apis.com/pets/none.jpg";return e.jsxs(b,{to:`/details/${i}`,className:"pet",children:[e.jsx("div",{className:"image-container",children:e.jsx("img",{src:c,alt:a})}),e.jsxs("div",{className:"info",children:[e.jsx("h1",{children:a}),e.jsx("h2",{children:`${t} — ${n} — ${o}`})]})]})},y=({pets:a})=>a!=null&&a.length?e.jsx("div",{className:"search",children:a.map(t=>e.jsx($,{animal:t.animal,name:t.name,breed:t.breed,images:t.images,location:`${t.city}, ${t.state}`,id:t.id},t.id))}):e.jsx("h1",{children:"No Pets Found"}),N=["bird","cat","dog","rabbit","reptile"],L=()=>{var h;const[a,t]=m.useState({location:"",animal:"",breed:""}),[n]=m.useContext(p),[r,o]=m.useState(""),[i]=g(r),c=(i==null?void 0:i.breeds)??[],l=u({queryKey:["search",a],queryFn:v}),j=((h=l==null?void 0:l.data)==null?void 0:h.pets)??[];return e.jsxs("div",{className:"search-params",children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault();const d=new FormData(s.target),x={animal:d.get("animal")??"",breed:d.get("breed")??"",location:d.get("location")??""};t(x)},children:[n?e.jsx("div",{className:"pet image-container",children:e.jsx("img",{src:n.images[0],alt:n.name})}):null,e.jsxs("label",{htmlFor:"location",children:["Location",e.jsx("input",{id:"location",name:"location",placeholder:"Location"})]}),e.jsxs("label",{htmlFor:"animal",children:["Animal",e.jsxs("select",{id:"animal",name:"animal",onChange:s=>{o(s.target.value)},onBlur:s=>{o(s.target.value)},children:[e.jsx("option",{}),N.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("label",{htmlFor:"breed",children:["Breed",e.jsxs("select",{disabled:!c.length,id:"breed",name:"breed",children:[e.jsx("option",{}),c.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("button",{children:"Submit"})]}),e.jsx(y,{pets:j})]})};export{L as default};

var b=Object.defineProperty;var E=(t,e,r)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var p=(t,e,r)=>E(t,typeof e!="symbol"?e+"":e,r);import{r as k,a as l,j as s,E as C,u as S,b as N,A as w}from"./index-DNjeOOWv.js";import{u as O}from"./useQuery-DvOKnG6l.js";function _(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q=k();const I=async({queryKey:t})=>{const e=t[1],r=await fetch(`https://pets-v2.dev-apis.com/pets?id=${e}`);if(!r.ok)throw new Error(`details/${e} fetch not ok`);return r.json()},D=({children:t})=>{const e=l.useRef(null);return e.current||(e.current=document.createElement("div"),e.current.className="modal-overlay",e.current.setAttribute("role","dialog"),e.current.setAttribute("aria-modal","true")),l.useEffect(()=>{const r=document.getElementById("modal");if(!r){console.error("Modal root not found: Make sure <div id='modal' /> exists in index.html");return}return r.appendChild(e.current),()=>{r.removeChild(e.current)}},[]),q.createPortal(t,e.current)};var u={exports:{}},h,g;function F(){if(g)return h;g=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return h=t,h}var m,j;function W(){if(j)return m;j=1;var t=F();function e(){}function r(){}return r.resetWarningCache=e,m=function(){function a(c,f,i,d,x,R){if(R!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}a.isRequired=a;function o(){return a}var n={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:o,element:a,elementType:a,instanceOf:o,node:a,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:e};return n.PropTypes=n,n},m}var T;function A(){return T||(T=1,u.exports=W()()),u.exports}var $=A();const P=_($);class y extends l.Component{constructor(){super(...arguments);p(this,"state",{active:0});p(this,"handleIndexClick",r=>{this.setState({active:+r.target.dataset.index})})}render(){const{active:r}=this.state,{images:a}=this.props;return s.jsxs("div",{className:"carousel",children:[s.jsx("img",{src:a[r],alt:"primary animal"}),s.jsx("div",{className:"carousel-smaller",children:a.map((o,n)=>s.jsx("img",{src:o,className:n===r?"active":"",alt:`animal thumbnail ${n+1}`,onClick:this.handleIndexClick,"data-index":n,role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&this.handleIndexClick({target:{dataset:{index:n}}})}},o+n))})]})}}p(y,"defaultProps",{images:["http://pets-images.dev-apis.com/pets/none.jpg"]});y.propTypes={images:P.arrayOf(P.string)};const M=()=>{var d;const{id:t}=S(),[e,r]=l.useState(!1),a=N(),[,o]=l.useContext(w),{data:n,isLoading:c,error:f}=O({queryKey:["details",t],queryFn:({queryKey:x})=>I({queryKey:x})});if(c)return s.jsx("div",{className:"loading-pane",children:s.jsx("h2",{className:"loader",children:"ðŸŒ€"})});if(f||!((d=n==null?void 0:n.pets)!=null&&d.length))return s.jsx("h2",{className:"error",children:"Something went wrong fetching the pet data."});const i=n.pets[0];return s.jsxs("div",{className:"details",children:[s.jsx(y,{images:i.images}),s.jsxs("div",{children:[s.jsx("h1",{children:i.name}),s.jsx("h2",{children:`${i.animal} â€” ${i.breed} â€” ${i.city}, ${i.state}`}),s.jsxs("button",{onClick:()=>r(!0),children:["Adopt ",i.name]}),s.jsx("p",{children:i.description}),e&&s.jsx(D,{children:s.jsxs("div",{children:[s.jsxs("h1",{children:["Would you like to adopt ",i.name,"?"]}),s.jsxs("div",{className:"buttons",children:[s.jsx("button",{onClick:()=>{o(i),a("/")},children:"Yes"}),s.jsx("button",{onClick:()=>r(!1),children:"No"})]})]})})]})]})};function U(t){return s.jsx(C,{children:s.jsx(M,{...t})})}export{U as default};
